const classNamePopapOpen="modal__show",classNamePopapError="modal__error",mapPopapOpen=document.querySelector(".company-contacts__map"),mapPopapClose=document.querySelector(".modal-map__close"),mapPopap=document.querySelector(".modal-map"),feedbackPopapOpen=document.querySelector(".company-contacts__button"),feedbackPopapClose=document.querySelector(".modal-feedback__close"),feedbackPopap=document.querySelector(".modal-feedback"),feedbackForm=document.querySelector(".modal-feedback__form"),feedbackPopapInputName=document.querySelector(".modal-feedback__input_name"),feedbackPopapInputEmail=document.querySelector(".modal-feedback__input_email"),classNameButtonPopapOpen="product-item__button-buy",classNameBuyPopapClose="modal-basket__close",basketPopap=document.querySelector(".modal-basket");function keyDownPopapListener(e){return a=>{"Escape"===a.code&&e.classList.contains(classNamePopapOpen)&&(a.preventDefault(),e.classList.remove(classNamePopapOpen))}}const mapListener=keyDownPopapListener(mapPopap),feedbackListener=keyDownPopapListener(feedbackPopap),basketListener=keyDownPopapListener(basketPopap);function tooglePopap(e){return a=>{a.preventDefault(),e.classList.toggle(classNamePopapOpen)}}const toogleMapPopap=tooglePopap(mapPopap),toogleFeedbackPopap=tooglePopap(feedbackPopap),toogleBasketPopap=tooglePopap(basketPopap);try{storage=localStorage.getItem("feedbackPopapInputName")}catch(e){throw isStorageSupport=!1,"Local Storage is not support!"}document.addEventListener("click",function(e){e.target.classList.contains(classNameButtonPopapOpen)&&(toogleBasketPopap(e),window.addEventListener("keydown",basketListener)),e.target.classList.contains("modal-basket__close")&&(toogleBasketPopap(e),window.removeEventListener("keydown",basketListener))}),mapPopapOpen.addEventListener("click",function(e){toogleMapPopap(e),window.addEventListener("keydown",mapListener)}),mapPopapClose.addEventListener("click",function(e){toogleMapPopap(e),window.removeEventListener("keydown",mapListener)}),feedbackPopapOpen.addEventListener("click",function(e){toogleFeedbackPopap(e),storage?(feedbackPopapInputName.value=storage,feedbackPopapInputEmail.focus()):feedbackPopapInputName.focus(),window.addEventListener("keydown",feedbackListener)}),feedbackPopapClose.addEventListener("click",function(e){toogleFeedbackPopap(e),window.removeEventListener("keydown",feedbackListener)}),feedbackForm.addEventListener("submit",function(e){feedbackPopapInputName.value&&feedbackPopapInputEmail.value?isStorageSupport&&localStorage.setItem("feedbackInputName",feedbackPopapInputName.value):(e.preventDefault(),feedbackPopap.classList.add("modal__error"))});